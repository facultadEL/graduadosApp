<!DOCTYPE html>
<html lang="en">
<head>
	<link type="text/css" rel="stylesheet" href="css/materialize.css"  media="screen,projection"/>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<link type="text/css" rel="stylesheet" href="css/estilo.css"  media="screen,projection"/>
	<title>Cursos</title>
</head>
<body>
<nav>
	<div class="nav-wrapper blue darken-4">
		<a href="inicio.html" class="brand-logo center">Graduados FRVM</a>
		<a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
		<ul class="left hide-on-med-and-down">
			<li><a href="perfil.html"><i class="material-icons">perm_identity</i></a></li>
			<li class="hideNotAdmin"><a class="graduadosHref" href="graduadosAdmin.html">Graduados <span class="new badge cantGraduados">0</span></a></li>
		</ul>
		<ul class="right hide-on-med-and-down">
			<li><a href="cursosAdmin.html"><strong>Cursos</strong></a></li>
			<li><a href="posgradosAdmin.html">Posgrados</a></li>
			<li><a href="empleoAdmin.html">Empleo</a></li>
            <li><a href="descuentosAdmin.html">Descuentos</a></li>
			<li><a href="#" onclick="logout()"><i class="material-icons">power_settings_new</i></a></li>
		</ul>
		<ul class="side-nav" id="mobile-demo">
			<li><a href="perfil.html">Perfil</a></li>
			<li class="hideNotAdmin"><a class="graduadosHref" href="graduadosAdmin.html">Graduados <span class="new badge cantGraduados">0</span></a></li>
			<li><a href="cursosAdmin.html"><strong>Cursos</strong></a></li>
			<li><a href="posgradosAdmin.html">Posgrados</a></li>
			<li><a href="empleoAdmin.html">Empleo</a></li>
            <li><a href="descuentosAdmin.html">Descuentos</a></li>
			<li><a href="#" onclick="logout()">Cerrar Sesión</a></li>
		</ul>
	</div>
</nav>
<div class="container">
	<div class="card-panel blue lighten-5">

            <div class="row">

                <form class="col s12" id="form" onsubmit="return controlSubmit();">

                    <h6 class="black-text">Cargar un nuevo descuento</h6>
                    <div class="divider"></div> <br>
                    <div class="row">
                        
                        <div class="input-field col s12">
                        	<input type="hidden" id="id" />
                            <input id="empresa" type="text" class="validate" onkeydown="sacarColor(this)" placeholder="Ingrese el nombre de la empresa" required>
                            <label for="empresa">Empresa:</label>                         
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="input-field col s12">
                            <input id="url" type="text" class="validate" onkeydown="sacarColor(this)" placeholder="Dirección de la página de la empresa" required>
                            <label for="url">URL:</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">

                            <div class="input-field col s12">
                                <textarea id="detalle" class="materialize-textarea validate" length="120" onkeydown="sacarColor(this)" placeholder="Descripción del beneficio" required></textarea>
                                <label for="detalle">Detalle Descuento:</label>
                            </div>
                        </div>
                    </div>

                    <div class="center-align">
                        <button class="btn waves-effect light-blue darken-3" type="submit" name="action">Registrar Descuento
                            <i class="material-icons right">done</i>
                        </button>
                    </div>
                </form>
            </div>
        
	
	
</div>
<div class="footer-copyright right-align">
		<div class="container">
			<i>© 2016 UTN FRVM</i>
		</div>
	</div>
  <!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>
	<script type="text/javascript" src="js/functions.js"></script>
	<script defer>

	function controlVacio(nombreSelector)
	{
		if($.trim($(nombreSelector).val()) == '')
		{
			$(nombreSelector).css('box-shadow','0px 0px 1px 1px #f24d4d');
			$(nombreSelector).focus();
			return false;
		}
		return true;
	}

	function sacarColor(me)
	{
		$(me).css('box-shadow','0px 0px 0px 0px #ccc');
	}

	
	function controlSubmit()
	{
		if(!controlVacio('#url')) return false;
		if(!controlVacio('#detalle')) return false;
		
		var storage = window.localStorage;
		var id = storage.getItem('id');
		
		var param = {
			"id":id,
			"url":($('#url').val()),
			"detalle":($('#detalle').val())
		}
		
		$('#loader').show();
		$.ajax({
			type:"POST",
			data: param,
			url: "http://extension.frvm.utn.edu.ar/graduadosApi/guardarDescuento.php",
			success: function(response)
			{
				$('#loader').hide();
				var r = JSON.parse(response);
				if(r[0].success)
				{
					alert("Se guardo correcto");
				}
				else
				{
					alert("No se pudo guardar");
				}
			},
			error: function(msg)
			{
				alert("Hubo un error al guardar los datos");
			}
		});

		return false;
	}

	$(document).ready(function(){
		
            $('input#url, textarea').characterCounter();
      
            $('select').material_select();
			setCantidad();

	});

	</script>

</body>
</html>